<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>DepartureLayer</title>
    <link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://docs.kissyui.com/1.4/source/guideline/templates/assets/com-prettify.css">
    <link rel="stylesheet" href="http://docs.kissyui.com/1.4/source/guideline/templates/assets/com.css">
    <script src="http://cdn.staticfile.org/jquery/2.1.1-rc2/jquery.min.js"></script>
    <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script src="http://cdn.staticfile.org/prettify/r298/prettify.min.js"></script>
    <script src="http://g.tbcdn.cn/kissy/k/1.4.8/seed-min.js" data-config="{combine:true}"></script>
  </head>
  <body data-spy="scroll" data-target=".bs-docs-sidebar">
    <div id="header"><a href="http://docs.kissyui.com/" class="logo">kissy</a>
      <nav><a href="http://docs.kissyui.com/1.4/docs/html/coms.html">优秀组件推荐</a></nav>
    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3 bs-docs-sidebar">
          <ul data-spy="affix" data-offset-top="0" class="nav nav-list bs-docs-sidenav"></ul>
        </div>
        <div class="span9 bs-docs-content">
          <h1 data-id="undefined" class="title">DepartureLayer</h1>
          <p class="author-wrapper"><span>组件有问题？旺旺联系作者：</span><a href="https://github.com/irenekay" target="_blank" data-name="槿瑟" class="author"><img src="https://avatars.githubusercontent.com/u/7337685?v=2&amp;s=60" alt="槿瑟"></a><span class="author-name">槿瑟</span><a href="https://github.com/organtest" target="_blank" data-name="良田" class="author"><img src="https://avatars.githubusercontent.com/u/8089452?v=2&amp;s=60" alt="良田"></a><span class="author-name">良田</span><a href="https://github.com/wuxiaorui86" target="_blank" data-name="元泉" class="author"><img src="https://avatars.githubusercontent.com/u/1789614?v=2&amp;s=60" alt="元泉"></a><span class="author-name">元泉</span>
          </p>
          <div class="common-link"><a href="../demo/index.html" target="_blank" class="demo">示例</a><a href="https://github.com/kissygalleryteam/DepartureLayer" target="_blank" class="source">源码</a></div>
          <p class="com-info"><span class="info-label">View</span><span data-com="DepartureLayer" class="J_View">1106</span></p>
          <p class="com-info"><span class="info-label">所属分类</span><a href="http://kpm.taobao.net/list/UI">UI</a><span class="info-label tag-label">组件标签</span><a href="http://kpm.taobao.net/list/tag?tag=浏览器升级">浏览器升级</a>
          </p>
          <p class="com-info"><span class="info-label">kissy版本</span><span>1.4.X</span>
          </p><h2 id="-">综述</h2>
<p>departurelayer是一个可配置的弹出浮层，在检测到一定的浏览器版本时弹出，提供了默认主题，用户可自行配置浮层样式及浮层弹出的条件、间隔时间等。</p>
<ul>
<li>版本：2.0.7</li>
<li>作者：槿瑟</li>
<li>demo：<a href="http://kg.kissyui.com/departurelayer/2.0.7/demo/index.html">http://kg.kissyui.com/departurelayer/2.0.7/demo/index.html</a></li>
</ul>
<h2 id="-">如何引入组件</h2>
<pre><code>KISSY.config({
  packages:[{
    name:&quot;kg/departurelayer&quot;,
    path:&quot;http://g.tbcdn.cn/kg/departurelayer/2.0.7&quot;,
    charset:&quot;utf-8&quot;,
    ignorePackageNameInUri:true
  }]
});
KISSY.use(&#39;kg/departurelayer/index&#39;)
</code></pre><h2 id="-">初始化组件</h2>
<p><em>注意：</em></p>
<p>如果不需要自定义html内容和样式，dialog,toptip,theme请不要配置。</p>
<pre><code>KISSY.use(&#39;kg/departurelayer/index&#39;, function (S, Killer) {
  var killer = new Killer({
    // 可选参数，用以匹配浏览器
    ua: [
      {
        // 浏览器名称 具体配置名称请参考[KISSY 1.3 KISSY.UA](http://docs.kissyui.com/1.3/docs/html/api/core/ua/) [KISSY 1.4 KISSY.UA](http://docs.kissyui.com/1.4/docs/html/api/ua/index.html)
        browser: &#39;chrome&#39;,
        // 支持多种校验模式 
        // 目前支持 
        // `&lt;=${version}` 所有小于等于该版本的都会命中
        // `&gt;=${version}` 所有大于等于该版本的都会命中
        // `=${version}`  所有等于该版本的都会命中
        // `&lt;${version}`  所有小于该版本的都会命中
        // `&gt;${version}`  所有大于该版本的都会命中
        // `~${version}`  所有大于等于该版本，小于下一版本区间的都会命中 （~12 =&gt; 12-20）
        // `${version}-${version}` 某个区间内都会命中
        version: &#39;&lt;12&#39;,
        // 枚举： all dialog toptip
        show: &#39;all&#39;
      }
    ],
    // 可配置html 如果配置html 则需要手动
    dialog: {
      // 提示升级的链接地址
      updateUrl: &#39;http://windows.microsoft.com/zh-cn/windows/downloads?spm=608.2291429.20140707.12.KdZxog&#39;,
      // 升级提醒的引导文案
      updateGuid: &#39;其实...亲有更好的选择&#39;,
      // 关闭按钮部分的文案配置。
      closeWarn: &quot;不，我还要用这悲催的方式浏览&quot;,
      // 升级按钮样式
      updateBtn: &#39;http://gtms03.alicdn.com/tps/i3/TB1RcVQFVXXXXbvXFXXcgZpFXXX-140-48.png&#39;,
      // slider 配置 最多5个最少2个
      slider : [ 
        {
          // slider图片内容
          img: &#39;http://gtms01.alicdn.com/tps/i1/TB1UpxsFVXXXXbIXXXXIXul4XXX-860-342.png&#39;,
          // 链接地址
          href: VOID_DEFAULT,
          // 图片的alt属性配置
          alt: &quot;&quot;
        }, {
          img:&#39;http://gtms02.alicdn.com/tps/i2/TB1d9prFVXXXXc1XXXXl0Cl4XXX-860-343.png&#39;,
          href: VOID_DEFAULT,
          alt: &quot;&quot;
        },{
          img: &#39;http://gtms03.alicdn.com/tps/i3/TB1OORrFVXXXXcbXXXXIXul4XXX-860-342.png&#39;,
          href: VOID_DEFAULT,
          alt: &quot;&quot;
        }
      ]
    },
    // 和dialog相同，可配置html，但配置html后的事件，行为需要开发者自己维护。
    toptip: {
      // 左侧提示文案
      title : &#39;亲，您的浏览器版本过低导致网页打开速度过慢，为享受极速体验，我们建议亲：&#39;,
      // 按钮文案
      button : &#39;升级浏览器&#39;,
      // 链接地址
      href: &#39;http://windows.microsoft.com/zh-cn/windows/downloads&#39;
    },
    // 自定义的css样式地址
    theme: &#39;css path&#39;,
    // 毫秒数，失效时间配置，用以控制dialog的失效，失效后如果配置的`show`是`dialog` 或者`all` 则会弹出`dialog`
    expires: 1020012
  });
  // 使用默认配置进行浏览器弹窗
  // callback 捕捉到的参数分别为 
  // `Store` 用来操作本地存储。 
  // `dialog` 初始化完成的`dialog`对象 当`show`不为 `dialog` 或者 `all` 的时候为 `null` 
  // `toptip` 初始化完成的`toptip`对象 当`show`不为 `toptip` 或者 `all` 的时候为 `null` 
  // `context` 当前的 `killer` 对象
  function callback(Store, dialog, toptip) {}
  // 开始弹窗
  killer.kill(callback);

  // matched version
  killer.browser
  // matched version
  killer.version
  // matched user rule 
  killer.rule
  // function to match the version
  killer.match
  // the matched result
  killer.matched
});
</code></pre><h2 id="-">说明：</h2>
<p>以 ua 判断浏览器真正版本可能不准确，比如用户切换 浏览器模式或文本模式。 这时候请在 html head 标签内添加如下代码，使浏览器以最新引擎渲染。</p>
<pre><code>  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
</code></pre>
          <div style="display:none;"><script type="text/javascript" src="http://tajs.qq.com/stats?sId=36378479" charset="UTF-8"></script></div>
          <script src="http://docs.kissyui.com/1.4/source/guideline/templates/assets/com.js"></script>
        </div>
      </div>
    </div>
  </body>
</html>